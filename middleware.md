# 中间件

订单系统的整体分析



QPS的框架嵌入系统进行QPS的监控，可视化工具进行监控



![](./images/订单系统存在的问题.png)



六个问题：

```text
第一，思考一下系统的核心业务流程，当然不是指那种查询之类的操作。所谓核心链路指的是对你的系统进行的数据更新的操 作，这才是核心链路，因为查询操作一般来说不涉及复杂的业务逻辑，主要是对数据的展示。
对你的系统的核心链路分析一下，有哪些步骤，这些步骤各自的性能如何，综合起来让你的核心链路的性能如何?在这里是否有改进的
空间?
第二，思考一下，在你的系统中，是否有类似后台线程定时补偿的逻辑? 比如订单长时间未支付就要自动关闭它，你们系统里有没有那种后台线程，会定时扫描你的数据，对异常数据进行补偿、自动修复等操
作的?
如果有的话，这种数据一般量有多大?如果没有，你可以思考一下，你们系统的核心数据是否需要类似的后台自动扫描机制?
第三，思考一下，在你的系统里有没有跟第三方系统进行耦合?就是一些核心流程里需要同步调用第三方系统进行查询、更新 等操作，第三方系统是否对你的核心链路有性能和稳定性上的影响?
第四，思考一下，在你的核心链路中，是否存在那种关键步骤可能会失败的情况?万一失败了该怎么办? 第五，大家可以思考一下，平时是否存在其他系统需要获取你们数据的情况?他们是如何获取你们数据的?
是直接跑SQL从你们数据库里查询?或者是调用你们的接口来获取数据?是否存在这种情况?如果有，对你们有什么影响吗? 
第六，系统是否存在流量洪峰的情况，有时候突然之间访问量增大好几倍，是否会对你们的系统产生无法承受的压力?
```

